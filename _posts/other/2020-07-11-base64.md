---
layout: post
title: "base64加密算法详解"
tagline: ""
date: '2020-07-11 17:55:48 +0800'
category: other
tags: 加密 技术 other
keywords: other,base64加密算法详解
description: other,base64加密算法详解
---
> base64加密算法详解

# Base64简介
Base64编码，是我们程序开发中经常使用到的编码方法。它是一种基于用64个可打印字符来表示二进制数据的表示方法。它通常用作存储、传输一些二进制数据编码方法！ 

# 原理
从所有字符中，选出64个基本字符，其他所有符号都转化为这个基本字符集中的字符，
基本字符:
a-z,A-Z,0-9,"+","/"
注意：=作为base64的垫字符
具体来说
* 将每三个字节作为一组，每组一共24个二进制位
* 将这24个二进制位分为四组，每组6个二进制位
* 在每组前面增加两个00，扩展为32个二进制位，即4个字节。
* 根据下表，得到扩展后每个字节的对应符号，连接得到Base64编码值
```
0　A　　17　R　　　34　i　　　51　z
1　B　　18　S　　　35　j　　　52　0
2　C　　19　T　　　36　k　　　53　1
3　D　　20　U　　　37　l　　　54　2
4　E　　21　V　　　38　m　　　55　3
5　F　　22　W　　　39　n　　　56　4
6　G　　23　X　　　40　o　　　57　5
7　H　　24　Y　　　41　p　　　58　6
8　I　　25　Z　　　42　q　　　59　7
9　J　　26　a　　　43　r　　　60　8
10　K　　27　b　　　44　s　　　61　9
11　L　　28　c　　　45　t　　　62　+
12　M　　29　d　　　46　u　　　63　/
13　N　　30　e　　　47　v
14　O　　31　f　　　48　w　　　
15　P　　32　g　　　49　x
16　Q　　33　h　　　50　y
```
实际上由于，三个字节转为4个字节，因此，Base64编码后的文本会比原文本大出3分之一左右。

举个例子
![9dd4fb982701b82b0c43f7fe8b2ecdd4.png](https://app.yinxiang.com/shard/s44/res/0cece440-4a9d-42d0-ace7-51a4a392f0a1.png)

因此，Man的base64值为TWFu

由于字符串长度随机，考虑最后一个分组

1. 假如最后一个分组有1个字节，将一个字节的8个二进制位转为2组，最后一组除了前面加2个0外，后面再加4个0，这样得到一个2位的Base64编码，再在末尾不上两个”=“号
    如”M“,可转化为2组，00010011、00010000，对应的Base64值分别是T、Q,再补上两个==，因此"M"的Base64编码为TQ==
2. 假如最后一个分组有2个字节，将两个字节的16个二进制位转为3组，最后一组除了前面加2个0外，后面再加2个0，得到的3位base64编码后面再加一个”=“。
    如：”Ma“，可转化为三组 00010011、00010110、00010000，对应base64编码值分别为T、W、E，再补上一个”=“最终为 TWE=

# 汉字转base64
汉字本身有多种编码，比如：gb3212,utf-8,gbk,由于每种编码的字节数不一致，所以同一个汉字每种编码的base64对应值都不一样。

# javascript中的问题
假定网页的编码是utf-8，我们希望对于同样的字符串，用PHP和Javascript可以得到同样的Base64编码。
这里就会产生一个问题。因为Javascript内部的字符串，都以utf-16的形式进行保存，因此编码的时候，我们首先必须将utf-8的值转成utf-16再编码，解码的时候，则是解码后还需要将utf-16的值转回成utf-8
# 扩展
根据base64思想，我们可以定义类似base32，base16等的加密方式。

如 base32，基本字符:A-Z,2-7,"="作为base64的垫字符,首先按照5字节划分，每个字节40位2进制，转化为8个5比特的二进制，最高位补000,最后分组不足5比特，补足5比特，最后一个字节划分的分组，差多少达到40字节，则需要补上多少个填充符”=“

---
参考：
- [一篇文章彻底弄懂Base64编码原理](https://blog.csdn.net/wo541075754/article/details/81734770)
- [Base64加密原理](https://blog.csdn.net/lazyer_dog/article/details/82628076)
- [RFC2045](https://www.ietf.org/rfc/rfc2045.txt)
